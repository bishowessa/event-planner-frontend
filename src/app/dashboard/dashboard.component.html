<div class="dashboard-container">
  <header class="dashboard-header">
    <h1>Dashboard</h1>
    <div class="search-bar">
      <input type="text" [(ngModel)]="searchQuery" (keyup.enter)="search()" placeholder="Search events by keyword...">
      <input type="date" [(ngModel)]="searchDate">
      <select [(ngModel)]="searchRole">
        <option value="All">All Roles</option>
        <option value="Organizer">Organizer</option>
        <option value="Attendee">Attendee</option>
      </select>
      <button (click)="search()">Search</button>
    </div>
    <a routerLink="/app/events/create" class="btn-create">Create New Event</a>
  </header>

  <div *ngIf="searchResults" class="search-results">
    <h2>Search Results</h2>
    <div class="event-grid">
      <div *ngFor="let event of searchResults" class="event-card">
        <h3>{{ event.title }}</h3>
        <p>{{ event.date | date:'dd/MM/yyyy' }} at {{ event.time }}</p>
        <p>{{ event.location }}</p>
        <a [routerLink]="['/app/events', event.id]" class="btn-details">View Details</a>
      </div>
    </div>
    <button (click)="searchResults = null">Clear Search</button>
  </div>

  <div *ngIf="!searchResults">
    <div *ngIf="authService.isLoggedIn(); else guestMessage">
      <section class="event-section">
        <h2>Organized Events</h2>
        <div class="event-grid" *ngIf="organizedEvents.length > 0; else noOrganized">
          <div *ngFor="let event of organizedEvents" class="event-card organized">
            <h3>{{ event.title }}</h3>
            <p>{{ event.date | date:'dd/MM/yyyy' }} at {{ event.time }}</p>
            <p>{{ event.location }}</p>
            <a [routerLink]="['/app/events', event.id]" class="btn-details">Manage</a>
          </div>
        </div>
        <ng-template #noOrganized>
          <p>You haven't organized any events yet.</p>
        </ng-template>
      </section>

      <section class="event-section">
        <h2>Invited Events</h2>
        <div class="event-grid" *ngIf="invitedEvents.length > 0; else noInvited">
          <div *ngFor="let event of invitedEvents" class="event-card invited">
            <h3>{{ event.title }}</h3>
            <p>{{ event.date | date:'dd/MM/yyyy' }} at {{ event.time }}</p>
            <p>{{ event.location }}</p>
            <a [routerLink]="['/app/events', event.id]" class="btn-details">View</a>
          </div>
        </div>
        <ng-template #noInvited>
          <p>No invitations yet.</p>
        </ng-template>
      </section>
    </div>
    <ng-template #guestMessage>
      <div class="guest-message">
        <p>Log in to view your personal events and invitations.</p>
        <a routerLink="/login" class="btn-login">Login Now</a>
      </div>
    </ng-template>
  </div>
</div>